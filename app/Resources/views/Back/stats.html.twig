{% extends "::base.html.twig" %}


{% block body %}
    <div class="container">
        <h1>Statistiques d'utilisation de l'application</h1>

        <div>
            Nombre d'utilisateurs enregistrés : <b> {{ totalusers }} </b>
        </div>


        <div>
            Nombre d' utilisateurs actifs : <b>{{ activeusers }} </b>
        </div>

        <div>
            Nombre de métiers ayant reçus des réponses : <b>{{ nbjobs }} </b>
        </div>

        <div>
            Nombre de domaines ayant reçus des réponses : <b>{{ nbdomains }} </b>
        </div>

        <br>

        <div>
            <h2>Classement des 20 métiers les plus répondus</h2>
            <table class="table bordered striped table-bordered">
                <thead>
                <tr>
                    <th>Métier</th>
                    <th>Nombre de réponses</th>
                </tr>
                </thead>
                {% for job in mostAnsweredJobs %}
                    <tr>
                        <td>{{ job.name }}</td>
                        <td>{{ job.total }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>

        <br>

        <div>
            <h2> Classement des 20 domaines les plus répondus</h2>
            <table class="table bordered striped table-bordered">
                <thead>
                <tr>
                    <th>Domaine</th>
                    <th>Nombre de réponses</th>
                </tr>
                </thead>
                {% for domain in mostAnsweredDomains %}
                    <tr>
                        <td>{{ domain.domain }}</td>
                        <td>{{ domain.total }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>

        <br>

        <div>
            <h2>Personnes pouvant participer au tirage au sort: </h2>
            <table>
                {% for person in selectedPersons %}
                    <tr>
                        <td>{{ person.username }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>

<h2>Nom du gagnant</h2>
        généré aléatoirement parmis les personnes ayant répondus à 3 métiers ou plus
        <h2>{{ winner.username }}</h2>

    </div>
{% endblock %}